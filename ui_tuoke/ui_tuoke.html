import React, { useState, useEffect, useRef } from 'react';
import { Mail, Phone, ArrowUpRight, ChevronDown, ChevronLeft, ChevronRight, Briefcase, Award, User, MapPin, Smartphone, CheckCircle, TrendingUp, Layers, Layout, Monitor, Zap, Database, Activity, FileText, Globe, X, ZoomIn, Thermometer, Wind, Target, Users, Puzzle } from 'lucide-react';

/**
 * Hook: Intersection Observer for fade-in animations on scroll
 */
const useScrollReveal = (threshold = 0.1) => {
  const [isVisible, setIsVisible] = useState(false);
  const domRef = useRef();

  useEffect(() => {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => setIsVisible(entry.isIntersecting));
    }, { threshold });

    const currentRef = domRef.current;
    if (currentRef) observer.observe(currentRef);
    return () => {
      if (currentRef) observer.unobserve(currentRef);
    };
  }, [threshold]);

  return [domRef, isVisible];
};

/**
 * Component: RevealWrapper
 * Wraps content to add the slide-up fade-in effect
 */
const Reveal = ({ children, delay = 0, className = "" }) => {
  const [ref, isVisible] = useScrollReveal();
  return (
    <div
      ref={ref}
      className={`transition-all duration-1000 ease-out transform ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-12'} ${className}`}
      style={{ transitionDelay: `${delay}ms` }}
    >
      {children}
    </div>
  );
};

/**
 * Component: Lightbox
 * Displays a full-screen image or video when clicked
 */
const Lightbox = ({ src, onClose }) => {
  // Prevent scrolling when lightbox is open
  useEffect(() => {
    document.body.style.overflow = 'hidden';
    return () => {
      document.body.style.overflow = ''; // Restore default scrolling
    };
  }, []);

  if (!src) return null;

  const isVideo = typeof src === 'string' && (src.endsWith('.mp4') || src.endsWith('.webm'));

  return (
    <div 
      className="fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in duration-200"
      onClick={onClose}
    >
      <button 
        className="absolute top-6 right-6 text-white/50 hover:text-white transition-colors p-2 z-50"
        onClick={onClose}
      >
        <X size={40} />
      </button>
      
      {isVideo ? (
        <video 
          src={src} 
          controls 
          autoPlay 
          className="max-w-full max-h-full rounded shadow-2xl animate-in zoom-in-95 duration-300 outline-none"
          onClick={(e) => e.stopPropagation()} 
        />
      ) : (
        <img 
          src={src} 
          alt="Full screen view" 
          className="max-w-full max-h-full object-contain rounded shadow-2xl animate-in zoom-in-95 duration-300"
          onClick={(e) => e.stopPropagation()} 
        />
      )}
    </div>
  );
};

/**
 * Component: ImageCarousel
 * Handles the slideshow for featured projects
 * Supports simple string arrays or objects with {src, caption}
 */
const ImageCarousel = ({ images, alt, onImageClick }) => {
  const [current, setCurrent] = useState(0);

  const next = (e) => {
    e.stopPropagation(); // Prevent triggering zoom
    setCurrent((prev) => (prev + 1) % images.length);
  };

  const prev = (e) => {
    e.stopPropagation();
    setCurrent((prev) => (prev - 1 + images.length) % images.length);
  };

  const getCurrentSrc = () => {
    const item = images[current];
    return typeof item === 'string' ? item : item.src;
  };

  const handleImageClick = () => {
    if (onImageClick) {
      onImageClick(getCurrentSrc());
    }
  };

  return (
    <div 
      className={`relative h-full w-full group/carousel ${onImageClick ? 'cursor-zoom-in' : 'cursor-default'}`}
      onClick={handleImageClick}
    >
      {/* Images Stack */}
      {images.map((item, idx) => {
        const src = typeof item === 'string' ? item : item.src;
        const caption = typeof item === 'string' ? null : item.caption;

        return (
          <div 
            key={idx}
            className={`absolute inset-0 transition-opacity duration-700 ease-in-out ${idx === current ? 'opacity-100 z-10' : 'opacity-0 z-0'}`}
          >
            <img 
              src={src} 
              alt={`${alt} - View ${idx + 1}`} 
              className="w-full h-full object-cover object-top" 
            />
            {/* Gradient Overlay integrated per slide to ensure text readability on all backgrounds */}
            <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent pointer-events-none"></div>
            
            {/* Caption Display (if available) */}
            {caption && (
              <div className="absolute bottom-8 left-8 right-8 z-20 pointer-events-none flex justify-center md:justify-start">
                <div className="bg-black/60 backdrop-blur-md text-white px-6 py-3 rounded-xl font-medium tracking-wide border border-white/10 shadow-lg transform transition-all duration-500 translate-y-0 opacity-100">
                  {caption}
                </div>
              </div>
            )}
          </div>
        );
      })}

      {/* Navigation Arrows - Show on hover */}
      <button 
        onClick={prev}
        className="absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-white/10 hover:bg-white/30 backdrop-blur-md p-2 rounded-full text-white transition-all opacity-0 group-hover/carousel:opacity-100 hover:scale-110"
      >
        <ChevronLeft size={24} />
      </button>
      <button 
        onClick={next}
        className="absolute right-4 top-1/2 -translate-y-1/2 z-20 bg-white/10 hover:bg-white/30 backdrop-blur-md p-2 rounded-full text-white transition-all opacity-0 group-hover/carousel:opacity-100 hover:scale-110"
      >
        <ChevronRight size={24} />
      </button>

      {/* Dots Indicator */}
      <div className="absolute bottom-6 right-8 z-20 flex gap-2">
        {images.map((_, idx) => (
          <button
            key={idx}
            onClick={(e) => { e.stopPropagation(); setCurrent(idx); }}
            className={`h-1.5 rounded-full transition-all duration-300 ${idx === current ? 'bg-white w-6' : 'bg-white/40 w-1.5 hover:bg-white/80'}`}
            aria-label={`Go to slide ${idx + 1}`}
          />
        ))}
      </div>

      {/* Zoom Hint Icon */}
      <div className={`absolute top-4 right-4 z-20 opacity-0 group-hover/carousel:opacity-100 transition-opacity bg-black/20 backdrop-blur-sm p-2 rounded-full text-white pointer-events-none ${!onImageClick ? 'hidden' : ''}`}>
        <ZoomIn size={18} />
      </div>
    </div>
  );
};

/**
 * Component: ParallaxBackground
 * Renders subtle background elements that move on scroll
 */
const ParallaxBackground = () => {
  const [scrollY, setScrollY] = useState(0);

  useEffect(() => {
    const handleScroll = () => setScrollY(window.scrollY);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  return (
    <div className="fixed inset-0 pointer-events-none z-0 overflow-hidden">
      {/* Circle 1 - Moves fast */}
      <div 
        className="absolute top-20 right-[10%] w-64 h-64 rounded-full border border-gray-100 opacity-60"
        style={{ transform: `translateY(${scrollY * 0.2}px)` }}
      />
      {/* Circle 2 - Moves slow */}
      <div 
        className="absolute top-[40%] left-[5%] w-96 h-96 rounded-full bg-gray-50 opacity-50 mix-blend-multiply filter blur-3xl"
        style={{ transform: `translateY(${scrollY * 0.1}px)` }}
      />
      {/* Grid Pattern */}
      <div 
        className="absolute top-0 left-0 w-full h-full opacity-[0.03]"
        style={{ 
          backgroundImage: 'radial-gradient(#000 1px, transparent 1px)', 
          backgroundSize: '40px 40px',
          transform: `translateY(${scrollY * 0.05}px)`
        }}
      />
      {/* Floating Shape */}
      <div 
        className="absolute bottom-[10%] right-[5%] w-48 h-48 border-2 border-gray-50 transform rotate-45"
        style={{ transform: `translateY(${-scrollY * 0.15}px) rotate(45deg)` }}
      />
    </div>
  );
};

export default function Portfolio() {
  const [lightboxImage, setLightboxImage] = useState(null);

  // Resume Data
  const personalInfo = {
    name: "王琦训",
    role: "高级 UI/UX 设计师",
    exp: "11年",
    age: "33岁",
    phone: "16621076623",
    email: "411271115@qq.com",
    projectCount: "50+",
    tags: ["原型图绘制", "界面设计", "设计规范整理", "UI走查"]
  };

  const featuredProjects = [
    {
      title: "上海城投竹园污水厂源网荷储平台",
      subtitle: "Energy Management & Visualization Platform",
      period: "2025.04 - 2025.10",
      role: "主导全流程设计",
      gridCols: "md:grid-cols-3", // Custom layout config
      description: "为竹园污水厂二厂打造的光伏发电、储能调度与能耗管理一体化可视化平台，涵盖大屏监控端与后台管理端。将复杂能源数据转化为直观图表，助力厂区实现精细化管控。",
      images: [
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/ct-04.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/ct-05.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/ct-01.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/ct-02.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/ct-03.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/ct-06.png",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/ct-07.png"
      ],
      details: [
        {
          icon: <Database size={20} />,
          title: "项目背景",
          content: "需整合光伏、储能、能耗等多源异构数据，原管理方式效率低，数据展示不直观，缺乏统一调度平台。"
        },
        {
          icon: <Layout size={20} />,
          title: "解决方案",
          content: "采用工业风视觉语言，深色基调+高对比度色彩；设计直观的可视化图表，优化后台操作流程，提升易用性。"
        },
        {
          icon: <FileText size={20} />,
          title: "我的职责",
          content: "负责大屏及后台的全案设计。**负责原型图绘制**，确立“绿色能源”视觉基调，绘制2.5D场景；运用易知微平台进行大屏搭建与动效落地。"
        },
        {
          icon: <Activity size={20} />,
          title: "项目成果",
          content: <>实现能源数据实时监控，有效支撑了精细化管控。<br/>设计风格和建模受到客户方领导高度好评，并成为其他项目组参考案例。</>,
          colSpan: "md:col-span-3", // Spanning full width on desktop
          sideImage: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/hp.png"
        }
      ]
    },
    {
      title: "中信期货 APP 全面改版",
      subtitle: "Fintech Mobile App Redesign",
      period: "2020.01 - 2020.08",
      role: "主导 UI 设计",
      description: "针对中信期货核心移动端产品进行的全面视觉体系升级。旨在解决原界面信息密度过高、交互逻辑复杂等痛点，打造专业、高效的金融交易体验。",
      images: [
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zxqh-01.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zxqh-02.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zxqh-03.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zxqh-04.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zxqh-05.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zxqh-06.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zxqh-07.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zxqh-08.jpg"
      ],
      details: [
        {
          icon: <Briefcase size={20} />,
          title: "项目背景",
          content: "原APP视觉层级混乱，关键操作路径冗余，品牌辨识度不足，急需视觉重构。"
        },
        {
          icon: <Layers size={20} />,
          title: "我的职责",
          content: "重构视觉体系，确立深蓝金融科技风格；优化交易下单路径；输出原子化设计规范。"
        },
        {
          icon: <TrendingUp size={20} />,
          title: "项目成果",
          content: "用户满意度达92%，活跃用户留存率提升15%，交易操作效率提升约25%。"
        }
      ]
    },
    {
      title: "中信期货移动展业 App+后台",
      subtitle: "Mobile Business Platform & Admin System",
      period: "2020.06 - 2022.04",
      role: "主导 UI/UX 设计",
      description: "为中信期货客户经理打造的移动化业务办理平台，涵盖客户管理、产品开户、业务审批等核心功能。实现业务流程的移动化与标准化，提升展业灵活性。",
      images: [
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zy-1.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zy-2.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zy-3.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zy-4.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zy-5.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/zy-6.jpg"
      ],
      details: [
        {
          icon: <Smartphone size={20} />,
          title: "项目背景",
          content: "需满足客户经理随时随地办理业务的需求，打通移动端与后台数据，替代传统低效的展业模式。"
        },
        {
          icon: <FileText size={20} />,
          title: "我的职责",
          content: "主导全套UI界面设计；梳理业务流程，构建统一的设计规范与组件库，确保多端体验一致性。"
        },
        {
          icon: <CheckCircle size={20} />,
          title: "项目成果",
          content: "核心业务办理效率提升约20%；输出的组件库成为开发标准，获业务部门“极大提升工作效率”的好评。"
        }
      ]
    },
    {
      title: "空调倍优智控系统",
      subtitle: "HVAC Intelligent Control System",
      period: "2023.10 - 2024.03",
      role: "主导 UI/UX 设计",
      description: "针对大型公共建筑空调系统能耗高、调控滞后的痛点，打造的智能化节能控制平台。结合AI算法与数据可视化，实现对冷站、末端设备的实时监控与精准调节，有效降低运营成本。",
      images: [
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/kt-1-hei.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/kt-1.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/kt-2.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/kt-3.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/kt-4.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/kt-5.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/kt-6.jpg"
      ],
      details: [
        {
          icon: <Thermometer size={20} />,
          title: "项目背景",
          content: "传统楼宇自控系统（BA）界面陈旧，操作门槛高；数据展示碎片化，难以直观评估节能效果。"
        },
        {
          icon: <Wind size={20} />,
          title: "解决方案",
          content: "重构交互逻辑，采用2.5D可视化呈现设备拓扑与流向；设计直观的能效仪表盘与报警中心，降低运维人员认知负荷。"
        },
        {
          icon: <Zap size={20} />,
          title: "项目成果",
          content: "界面操作效率提升30%，帮助运维团队实现空调系统能耗降低约15%，获客户“智能化标杆项目”评价。"
        },
        {
          icon: <FileText size={20} />,
          title: "我的职责",
          content: "负责B端后台的UI设计。优化设备调控的交互逻辑，确保用户体验流畅。"
        }
      ]
    },
    {
      title: "虹口区碳中和管理平台",
      subtitle: "Carbon Neutrality Management Platform",
      period: "2025.07 - 2025.10",
      role: "主导全流程设计",
      description: "为虹口区政府打造的区级碳排放综合监测、管理与决策支持平台。服务于政府管理、企业上报与公众科普等多角色场景，旨在通过数字化手段支撑区域碳管理的精细化决策。",
      // Updated with new image links
      images: [
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/hk-1.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/hk-2.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/hk-3.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/hk-4.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/hk-5.jpg",
        "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/hk-6.jpg"
      ],
      details: [
        {
          icon: <Database size={20} />,
          title: "项目挑战",
          content: "业务模块复杂，涉及多角色（政府/企业/公众）交互；需在海量数据中兼顾政务平台的严谨性与可视化的易读性。"
        },
        {
          icon: <Layout size={20} />,
          title: "解决方案",
          content: "提出“政务严谨性+数据可读性”双轨设计策略；重构信息架构，设计清晰的导航系统与数据可视化图表。"
        },
        {
          icon: <CheckCircle size={20} />,
          title: "项目成果",
          content: "获主管单位高度认可，被誉为“直观易懂、操作便捷”，有效支撑了区域碳管理的数字化与精细化决策。"
        },
        {
          icon: <FileText size={20} />,
          title: "我的职责",
          content: "主导全流程设计。通过多轮迭代厘清复杂业务逻辑，确保各角色端操作体验的合理性与高效性。"
        }
      ]
    }
  ];

  const experiences = [
    {
      company: "上海集秒信息科技工作室",
      role: "高级 UI 设计师",
      period: "2023.04 - 至今",
      type: "设计服务业",
      desc: "负责政企类大型数据可视化平台的全流程设计，主导设计评审、视觉风格定义与落地。熟练应用易知微等低代码平台，显著提升设计到开发的落地效率。所负责项目因对业务的深刻理解与高质量交付，多次获得客户方高度表扬。",
      highlights: ["数据可视化", "低代码平台", "政务大屏", "全流程主导"],
      challenge: "政企类数据可视化项目通常涉及极其复杂的业务逻辑和多角色用户（管理者、业务人员、公众），如何在有限的屏幕空间内清晰呈现海量数据，并满足不同角色的核心诉求，是一大挑战。同时，项目周期紧，对设计的精准度和开发落地效率要求极高。",
      solutions: [
        { title: "前期深度介入", desc: "在需求阶段，主动与业务方反复沟通，使用流程图和信息架构图辅助理解，确保在设计前完全吃透业务逻辑。" },
        { title: "设计策略先行", desc: "针对不同角色，采用“场景化设计”策略，为核心用户路径设计最直观的数据呈现和操作流程。例如，为管理者设计“决策驾驶舱”视图，为业务人员设计“任务执行”视图。" },
        { title: "善用工具提效", desc: "熟练掌握易知微等低代码平台，将设计组件与平台能力结合，不仅提升了设计稿的落地还原度，还能提前规避开发难点，实现了高质量与高效率的平衡。" }
      ]
    },
    {
      company: "中信期货股份有限公司",
      role: "高级 UI 设计师",
      period: "2020.01 - 2023.04",
      type: "金融行业",
      desc: "主导中信期货APP全面视觉改版，用户满意度达92%，活跃留存提升15%。负责移动展业平台从0到1设计，构建的组件库提升开发效率20%。参与投教平台等重点项目，以严谨的设计规范推动金融产品体验升级。",
      highlights: ["APP视觉重构", "设计规范体系", "B端移动展业", "用户体验提升"],
      challenge: "金融产品合规性强、信息密度高，视觉改版需在提升用户体验的同时，严格保证信息的准确性和不可误导性。此外，推动跨部门（产品、开发、风控）对新的设计规范和组件库达成共识并严格执行，存在协作阻力。",
      solutions: [
        { title: "数据驱动设计", desc: "通过用户调研和A/B测试验证设计假设，用数据（如用户操作热力图、任务完成率）说服各方，证明简化流程和优化布局的合理性，从而在合规框架内实现体验革新。" },
        { title: "建立设计权威", desc: "通过创建详尽、易用的设计规范和使用指南，并主动为开发团队提供培训，将组件库打造成跨部门协作的“通用语言”，减少了沟通成本，最终赢得了团队的信任与依赖。" }
      ]
    },
    {
      company: "平安金融壹账通",
      role: "高级 UI 设计师",
      period: "2018.01 - 2020.01",
      type: "金融行业",
      desc: "深度参与东南亚头部银行（RHB, CIMB）数字化转型项目。基于当地用户习惯进行本地化设计与竞品分析。主导业务线组件库搭建，提升跨国团队协作效率。专业能力获国际团队高度认可，曾受邀加入新加坡核心团队。",
      highlights: ["国际化设计", "金融科技出海", "本地化研究", "Design System"],
      challenge: "服务东南亚银行项目时，面临语言、文化、金融政策差异带来的本地化挑战。设计方案需兼顾国际化设计趋势与当地用户的独特习惯和审美偏好。",
      solutions: [
        { title: "深度本地化研究", desc: "不仅研究竞品，更深入研究当地用户的色彩偏好、阅读习惯、数字和货币的显示方式等细节，确保设计的每一个元素都符合当地语境。" },
        { title: "建立灵活的组件系统", desc: "在设计系统中为不同区域预留可配置的变量（如字体、主色、图标风格），使核心交互逻辑保持一致的同时，能快速适配不同的视觉表现，支撑了项目的高效全球化交付。" }
      ]
    },
    {
      company: "上海胜者源网络",
      role: "高级 UI 设计师",
      period: "2016.08 - 2017.12",
      type: "教育行业",
      desc: "负责K12教育行业产品的整体UI/UX设计，涵盖官网、学生端APP及教师教学平台。针对目标用户（学生/家长）特性优化界面亲和力与交互易用性，独立完成从概念到上线的高保真视觉设计。",
      highlights: ["教育类产品", "多端设计", "亲和力视觉", "用户体验优化"]
    },
    {
      company: "上海惠岚科技股份有限公司",
      role: "高级 UI 设计师",
      period: "2015.07 - 2016.07",
      type: "设计服务业",
      desc: "负责微信小程序UI设计，其设计成果有效提升了用户互动数据，获得项目经理的积极反馈与认可。",
      highlights: ["微信小程序", "UI设计", "用户互动提升"]
    }
  ];

  const projects = [
    {
      title: "上海节能中心大屏",
      category: "数据可视化",
      role: "主导设计",
      desc: "定制“绿色+科技”视觉体系，平衡专业性与视觉冲击力，成为对外展示核心窗口。",
      color: "bg-teal-50 text-teal-900",
      video: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/jieneng-center.mp4"
    },
    {
      title: "漕河泾科绿三期能源管理中心",
      category: "Smart Campus / Data Viz",
      role: "大屏设计",
      desc: "梳理能耗数据指标与报警规则，优化信息呈现层级。助力园区实现能耗精细化管理。",
      color: "bg-slate-50 text-slate-900",
      image: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/kl-1.jpg"
    },
    {
      title: "金山区政府太阳能光伏系统",
      category: "Data Viz / Government",
      role: "主导设计",
      desc: "打造区域级光伏发电监测平台，通过可视化手段展示实时发电功率、累计收益及环境贡献，辅助政府部门进行能源监管与决策。",
      color: "bg-indigo-50 text-indigo-900",
      video: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/guangfu.mp4"
    },
    {
      title: "中信期货投教平台高保真原型图",
      category: "Web Design / Education",
      role: "UI/UX 设计",
      desc: "负责关键模块的设计，优化用户学习体验。严谨的设计态度获团队高度认可。",
      color: "bg-orange-50 text-orange-900",
      image: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/tj-1.jpg"
    },
    {
      title: "RHB APP",
      category: "Mobile / Fintech",
      role: "UI/UX 设计",
      desc: "参与东南亚头部银行 RHB 的移动端数字化转型项目，负责关键功能的交互与视觉设计，提升用户体验。",
      color: "bg-blue-50 text-blue-900",
      image: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/rhb.jpg"
    },
    {
      title: "CIMB",
      category: "Mobile / Fintech",
      role: "本地化设计",
      desc: "参与 RHB、CIMB 等东南亚头部银行 App 设计。主导本地化研究与竞品分析。",
      color: "bg-blue-50 text-blue-900",
      image: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/cimb.jpg"
    },
    {
      title: "Smart Agent",
      category: "Mobile / Fintech",
      role: "UI/UX 设计",
      desc: "面向海外市场的保险代理人展业 APP。结合本地化用户习惯，优化信息录入与客户管理流程，提升展业效率。",
      color: "bg-orange-50 text-orange-900",
      image: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/smart.jpg"
    },
    {
      title: "视件APP",
      category: "Mobile / Social",
      role: "UI/UX 设计",
      desc: "报名参加周边活动，扩大社交圈。打造年轻化的社交活动平台。",
      color: "bg-purple-50 text-purple-900",
      image: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/sj-1.jpg"
    }
  ];

  const skills = [
    { name: "Axure / 交互原型", level: 85 },
    { name: "Figma / Sketch", level: 95 },
    { name: "Adobe PS / AI", level: 90 },
    { name: "数据可视化设计", level: 90 },
    { name: "易知微(大屏) / 低代码", level: 80 }
  ];

  // Updated team images with captions
  const teamImages = [
    { src: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/td-0.jpg", caption: "团队研讨会" },
    { src: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/td-1.jpg", caption: "UI评审前审查" },
    { src: "https://portfolio-video-1354513467.cos.ap-shanghai.myqcloud.com/wqx/td-2.jpg", caption: "周报" }
  ];

  return (
    <div className="relative min-h-screen bg-white text-gray-900 font-sans selection:bg-black selection:text-white overflow-x-hidden">
      {/* Lightbox Overlay - Conditional Rendering for proper cleanup */}
      {lightboxImage && (
        <Lightbox 
          src={lightboxImage} 
          onClose={() => setLightboxImage(null)} 
        />
      )}

      <ParallaxBackground />

      {/* Navigation */}
      <nav className="fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100 transition-all duration-300">
        <div className="max-w-6xl mx-auto px-6 h-20 flex items-center justify-between">
          <div className="font-bold text-xl tracking-tighter">WQ.</div>
          <div className="hidden md:flex space-x-8 text-sm font-medium text-gray-500">
            <a href="#about" className="hover:text-black transition-colors">关于</a>
            <a href="#work" className="hover:text-black transition-colors">项目</a>
            <a href="#experience" className="hover:text-black transition-colors">经历</a>
            <a href="#contact" className="hover:text-black transition-colors">联系</a>
          </div>
          <a 
            href={`mailto:${personalInfo.email}`}
            className="group flex items-center gap-2 px-5 py-2 bg-black text-white text-sm rounded-full hover:bg-gray-800 transition-all hover:scale-105 active:scale-95"
          >
            Let's Talk
            <ArrowUpRight size={16} className="group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform" />
          </a>
        </div>
      </nav>

      {/* Hero Section */}
      <header className="relative z-10 pt-32 pb-20 md:pt-40 md:pb-32 px-6 max-w-6xl mx-auto">
        <div className="grid md:grid-cols-2 gap-12 items-center">
          {/* Left Column: Text */}
          <Reveal>
            <p className="text-gray-500 font-medium mb-6 tracking-wide uppercase text-sm">
              Based in Shanghai · 11 Years Experience
            </p>
            <h1 className="text-5xl md:text-7xl font-bold tracking-tight leading-[1.1] mb-8">
              <span className="block">UI/UX 设计师</span>
              <span className="block text-gray-300 hover:text-gray-400 transition-colors duration-500 cursor-default">
                作品集
              </span>
            </h1>
            <p className="text-xl md:text-2xl text-gray-600 max-w-lg leading-relaxed mb-8">
              我是 <span className="text-black font-semibold">{personalInfo.name}</span>，一名深耕金融科技与数据可视化领域的高级 UI/UX 设计师。
            </p>
            <div className="flex flex-wrap gap-3">
              {personalInfo.tags.map((tag, i) => (
                <span key={i} className="px-4 py-2 bg-gray-50 border border-gray-100 rounded-full text-sm font-medium text-gray-600 hover:border-gray-300 hover:bg-white transition-all cursor-default">
                  {tag}
                </span>
              ))}
            </div>
          </Reveal>

          {/* Right Column: Full Image Profile Card */}
          <Reveal delay={200} className="relative flex justify-center md:justify-end">
             {/* Card Container */}
            <div className="relative w-full max-w-sm h-[500px] bg-gray-200 rounded-2xl overflow-hidden shadow-2xl hover:shadow-[0_20px_50px_rgba(0,0,0,0.3)] transition-all duration-500 group">
              
              {/* Image Background */}
              <img 
                src="https://github.com/chenlaoshideng-hub/qixun2025/raw/main/3.jpg" 
                alt="Wang Qixun" 
                className="absolute inset-0 w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-105"
              />
              
              {/* Gradient Overlay for Text Readability */}
              <div className="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent pointer-events-none"></div>

              {/* Decorative Blur Element */}
              <div className="absolute -bottom-20 -right-20 w-64 h-64 bg-blue-500 rounded-full mix-blend-overlay filter blur-[80px] opacity-40 pointer-events-none"></div>

              {/* Card Content (Positioned Bottom) */}
              <div className="absolute bottom-0 left-0 right-0 p-8 text-white z-10 pointer-events-none">
                
                {/* Name & Title */}
                <div className="mb-6">
                  <h2 className="text-3xl font-bold mb-2 tracking-tight">{personalInfo.name}</h2>
                  <p className="text-gray-300 font-medium text-sm flex items-center gap-2">
                    <Briefcase size={14} className="text-blue-400" />
                    {personalInfo.role}
                  </p>
                </div>

                {/* Stats Grid - Removed borders for cleaner look */}
                <div className="grid grid-cols-3 gap-2 mb-6 pt-5">
                    <div className="text-center group/stat">
                      <div className="font-bold text-xl group-hover/stat:text-blue-400 transition-colors">{personalInfo.exp}</div>
                      <div className="text-[10px] text-gray-400 uppercase tracking-widest font-medium mt-1">经验</div>
                    </div>
                    <div className="text-center group/stat">
                      <div className="font-bold text-xl group-hover/stat:text-blue-400 transition-colors">{personalInfo.age}</div>
                      <div className="text-[10px] text-gray-400 uppercase tracking-widest font-medium mt-1">年龄</div>
                    </div>
                    <div className="text-center group/stat">
                      <div className="font-bold text-xl group-hover/stat:text-blue-400 transition-colors">{personalInfo.projectCount}</div>
                      <div className="text-[10px] text-gray-400 uppercase tracking-widest font-medium mt-1">项目</div>
                    </div>
                </div>
              </div>
            </div>
          </Reveal>
        </div>

        <div className="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce text-gray-300 hidden md:block">
          <ChevronDown size={24} />
        </div>
      </header>

      {/* Stats / Intro Section */}
      <section id="about" className="relative z-10 py-24 bg-gray-50">
        <div className="max-w-6xl mx-auto px-6">
          <div className="grid md:grid-cols-3 gap-12">
            <Reveal className="col-span-1 md:col-span-2">
              <h2 className="text-3xl font-bold mb-6 flex items-center gap-3">
                <Award className="text-gray-400" />
                核心优势
              </h2>
              <div className="space-y-6 text-gray-600 leading-relaxed text-lg">
                <p>
                  <strong className="text-black">资深专业背景：</strong> 11年设计经验，美术科班出身。长期深耕金融科技与数据可视化，对复杂业务逻辑有极强的转化能力。
                </p>
                <p>
                  <strong className="text-black">卓越的全链路能力：</strong> 精通从需求分析、交互架构到视觉落地、开发跟进的全流程。具备强大的从0到1项目主导能力。
                </p>
                <p>
                  <strong className="text-black">国际化与协作：</strong> 曾服务东南亚头部银行，适应国际化标准。具备极强的责任心，善于跨部门沟通推动项目落地。
                </p>
              </div>
            </Reveal>
            <Reveal delay={200} className="col-span-1">
               <h3 className="text-sm font-bold text-gray-400 uppercase tracking-widest mb-6">Design Stack</h3>
               <div className="space-y-4">
                 {skills.map((skill, idx) => (
                   <div key={idx} className="group">
                     <div className="flex justify-between mb-1 text-sm font-medium">
                       <span className="group-hover:text-black transition-colors">{skill.name}</span>
                       <span className="text-gray-400">{skill.level}%</span>
                     </div>
                     <div className="h-1.5 w-full bg-gray-200 rounded-full overflow-hidden">
                       <div 
                        className="h-full bg-black rounded-full transition-all duration-1000 ease-out origin-left group-hover:scale-x-105"
                        style={{ width: `${skill.level}%` }}
                       />
                     </div>
                   </div>
                 ))}
               </div>
            </Reveal>
          </div>
        </div>
      </section>

      {/* Workflow & Management Section (New Request) */}
      <section className="relative z-10 py-24 bg-white border-b border-gray-100">
        <div className="max-w-6xl mx-auto px-6">
          <Reveal>
            <h2 className="text-3xl font-bold mb-16 flex items-center gap-3">
              <Layers className="text-gray-400" />
              工作挑战与团队协同
            </h2>
          </Reveal>

          <div className="flex flex-col gap-12">
            {/* Section 1: Challenges (Top) */}
            <Reveal delay={100}>
               <div className="border-b border-gray-100 pb-12">
                 <h3 className="text-2xl font-bold mb-10 flex items-center gap-3 text-gray-900">
                   <Zap className="text-blue-600" size={28} />
                   困难与挑战
                 </h3>
                 <div className="grid md:grid-cols-2 gap-x-16 gap-y-12">
                   
                   {/* Point 1 */}
                   <div className="flex gap-5">
                     <div className="w-10 h-10 rounded-full bg-red-50 text-red-500 flex items-center justify-center shrink-0 font-bold text-lg">1</div>
                     <div>
                       <h4 className="font-bold text-gray-900 mb-3 text-lg">挑战：金融产品合规严谨性与用户体验流畅性的矛盾</h4>
                       <p className="text-gray-600 leading-relaxed">
                         <span className="font-bold text-gray-800">解决：</span>深入研读合规条款，将强制性要求（如风险提示）通过分层披露、情景化嵌入等设计手段自然融入用户操作流，在满足规范的同时最大限度保障操作顺畅。
                       </p>
                     </div>
                   </div>

                   {/* Point 2 */}
                   <div className="flex gap-5">
                     <div className="w-10 h-10 rounded-full bg-red-50 text-red-500 flex items-center justify-center shrink-0 font-bold text-lg">2</div>
                     <div>
                       <h4 className="font-bold text-gray-900 mb-3 text-lg">挑战：复杂数据与多角色诉求在有限空间内的清晰呈现</h4>
                       <p className="text-gray-600 leading-relaxed">
                         <span className="font-bold text-gray-800">解决：</span>采用 “场景化设计”策略，为不同角色（如政府领导、企业专员）定制专属数据视图与核心操作路径，通过交互式钻取实现从总览到细节的平滑过渡，化繁为简。
                       </p>
                     </div>
                   </div>

                   {/* Point 3 */}
                   <div className="flex gap-5">
                     <div className="w-10 h-10 rounded-full bg-red-50 text-red-500 flex items-center justify-center shrink-0 font-bold text-lg">3</div>
                     <div>
                       <h4 className="font-bold text-gray-900 mb-3 text-lg">挑战：跨团队协作中设计规范落地难、还原度低</h4>
                       <p className="text-gray-600 leading-relaxed">
                         <span className="font-bold text-gray-800">解决：</span>主导搭建可复用组件库并编写详尽使用指南，将其打造为团队协作的“通用语言”。通过主动培训、高频走查与问题追踪，确保设计高保真落地，提升协作效率20%以上。
                       </p>
                     </div>
                   </div>

                   {/* Point 4 */}
                   <div className="flex gap-5">
                     <div className="w-10 h-10 rounded-full bg-red-50 text-red-500 flex items-center justify-center shrink-0 font-bold text-lg">4</div>
                     <div>
                       <h4 className="font-bold text-gray-900 mb-3 text-lg">挑战：紧迫项目周期内实现高质量交付</h4>
                       <p className="text-gray-600 leading-relaxed">
                         <span className="font-bold text-gray-800">解决：</span>善用低代码平台进行快速原型搭建与方案验证，将设计环节前置。通过模块化设计与组件复用，显著提升从设计到开发的生产力，确保项目按时高质量上线。
                       </p>
                     </div>
                   </div>

                 </div>
               </div>
            </Reveal>

            {/* Section 2: Project Management (Bottom) */}
            <Reveal delay={200}>
               <h3 className="text-2xl font-bold mb-10 flex items-center gap-3 text-gray-900">
                 <User className="text-blue-600" size={28} />
                 团队管理与项目推进
               </h3>
               
               {/* Changed to 1 row 3 columns layout */}
               <div className="grid md:grid-cols-3 gap-6">
                  
                  {/* Card 1: Project Management */}
                  <div className="bg-gray-50 p-6 rounded-2xl border border-gray-100 flex flex-col justify-between">
                    <div>
                      <h4 className="font-bold text-gray-900 mb-4 flex items-center gap-2 text-base">
                        <TrendingUp size={18} className="text-blue-600" /> 全生命周期的项目管理
                      </h4>
                      <p className="text-gray-600 leading-relaxed mb-8 text-sm">
                        不局限于执行，而是从<span className="text-black font-medium">需求评审</span>阶段介入。制定详细的设计排期（Timeline），预判技术难点与风险，确保项目按时交付。
                      </p>
                    </div>
                    <div className="mt-auto px-1">
                      <div className="relative">
                        {/* Connecting Line Background */}
                        <div className="absolute top-4 left-0 w-full h-0.5 bg-gray-200 -z-0"></div>
                        
                        {/* Steps */}
                        <div className="flex justify-between relative w-full">
                          {["需求分析", "交互原型", "视觉定稿", "走查验收"].map((step, i) => (
                            <div key={i} className="flex flex-col items-center gap-2 group cursor-default">
                              {/* Circle Node */}
                              <div className="w-8 h-8 rounded-full bg-white border-2 border-blue-500 text-blue-600 flex items-center justify-center text-xs font-bold shadow-sm z-10 transition-all duration-300 group-hover:bg-blue-600 group-hover:text-white group-hover:scale-110">
                                {i + 1}
                              </div>
                              {/* Label */}
                              <span className="text-[10px] font-bold text-gray-500 group-hover:text-blue-600 transition-colors bg-white px-1 py-0.5 rounded-full border border-gray-100 shadow-sm whitespace-nowrap">{step}</span>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                  </div>

                  {/* Card 2: Team Growth */}
                  <div className="bg-gray-50 p-6 rounded-2xl border border-gray-100 flex flex-col">
                    <h4 className="font-bold text-gray-900 mb-4 flex items-center gap-2 text-base">
                       <Monitor size={18} className="text-blue-600" /> 团队成长与管理
                    </h4>
                    <p className="text-gray-600 leading-relaxed text-sm">
                      具备丰富的跨部门项目协同经验，能有效驱动产品、开发、测试等多角色团队对齐目标。在团队内部，曾承担小组负责人的职责，通过建立设计评审机制、拆分复杂设计任务并合理分配，确保项目高质量交付。注重团队赋能与知识沉淀，通过建立共享组件库、编写设计规范、组织内部分享会，成功带领数名初级设计师快速成长，提升了团队的整体输出质量与协作效率。
                    </p>
                  </div>

                  {/* Card 3: Team Carousel */}
                  <div className="w-full min-h-[300px] md:min-h-0 md:h-full rounded-2xl overflow-hidden shadow-lg border border-gray-100 relative bg-gray-100">
                     <ImageCarousel 
                        images={teamImages} 
                        alt="Team Collaboration" 
                     />
                  </div>
               </div>
            </Reveal>
          </div>
        </div>
      </section>

      {/* Work Section Container */}
      <section id="work" className="relative z-10 pt-12 pb-32 px-6 max-w-6xl mx-auto">
        
        {/* Section Header */}
        <Reveal>
          <div className="flex items-end justify-between mb-16">
            <div>
              <h2 className="text-4xl md:text-5xl font-bold mb-4">精选案例</h2>
              <p className="text-gray-500 text-lg">Selected Work (2018 - 2025)</p>
            </div>
          </div>
        </Reveal>

        {/* Featured Case Studies - Now with Carousel & Lightbox */}
        <div className="space-y-20 mb-20">
          {featuredProjects.map((project, index) => (
            <Reveal key={index} delay={index * 100}>
              <div className="bg-white rounded-3xl overflow-hidden border border-gray-100 shadow-xl group">
                  {/* Image Side (Top) - Carousel */}
                  <div className="relative h-[480px] w-full bg-gray-100 overflow-hidden">
                      <ImageCarousel 
                        images={project.images} 
                        alt={project.title} 
                        onImageClick={(src) => setLightboxImage(src)}
                      />
                      
                      {/* Text Overlay for title */}
                      <div className="absolute bottom-8 left-8 md:left-12 text-white max-w-3xl z-20 pointer-events-none">
                          <div className="flex items-center gap-3 mb-3">
                            <span className="bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-widest shadow-sm">Featured Case</span>
                            <span className="text-white/80 font-medium text-sm">{project.period}</span>
                          </div>
                          <h3 className="text-3xl md:text-5xl font-bold mb-2 shadow-sm drop-shadow-md">{project.title}</h3>
                          <p className="text-white/90 text-lg md:text-xl font-light drop-shadow-sm">{project.subtitle}</p>
                      </div>
                  </div>

                  {/* Content Side (Bottom) */}
                  <div className="p-8 md:p-12 bg-white">
                      <div className="mb-12 max-w-4xl">
                        <h4 className="text-lg font-bold mb-4 text-gray-900 flex items-center gap-2">
                           <Briefcase size={20} className="text-blue-600" />
                           项目概述
                        </h4>
                        <p className="text-gray-600 leading-relaxed text-lg">
                          {project.description}
                        </p>
                      </div>
                      
                      {/* Details Grid - Dynamically sized based on items count or custom config */}
                      <div className={`grid gap-8 ${project.gridCols ? project.gridCols : (project.details.length === 4 ? 'md:grid-cols-2' : 'md:grid-cols-3')}`}>
                        {project.details.map((item, idx) => (
                          <div key={idx} className={`flex flex-col gap-4 p-6 rounded-2xl bg-gray-50/80 hover:bg-gray-50 transition-all duration-300 group/item ${item.colSpan || ''}`}>
                              {/* Inner Layout Container */}
                              <div className={`flex flex-col ${item.sideImage ? 'md:flex-row gap-8 items-center' : 'gap-4'}`}>
                                  
                                  {/* Left Content (Text & Icon) */}
                                  <div className="flex-1">
                                      <div className="w-12 h-12 rounded-xl bg-white flex items-center justify-center text-blue-600 shadow-sm shrink-0 mb-4 group-hover/item:bg-blue-600 group-hover/item:text-white transition-colors">
                                        {item.icon}
                                      </div>
                                      <div>
                                        <h4 className="font-bold text-gray-900 mb-2 text-sm uppercase tracking-wide">{item.title}</h4>
                                        <p className="text-sm text-gray-600 leading-relaxed">
                                          {item.content}
                                        </p>
                                      </div>
                                  </div>

                                  {/* Right Content (Optional Image) */}
                                  {item.sideImage && (
                                    <div className="w-full md:w-1/3 shrink-0">
                                      <img 
                                        src={item.sideImage} 
                                        alt="Outcome Visualization" 
                                        className="rounded-lg shadow-md w-full h-auto object-cover hover:scale-105 transition-transform duration-500"
                                        onClick={() => setLightboxImage(item.sideImage)}
                                      />
                                    </div>
                                  )}
                              </div>
                          </div>
                        ))}
                      </div>

                      <div className="mt-12 flex flex-wrap items-center justify-start gap-6">
                        <div className="flex items-center gap-3 bg-gray-100 px-4 py-2 rounded-full">
                           <span className="text-xs font-bold uppercase text-gray-500 tracking-wider">Role</span>
                           <span className="text-sm font-bold text-gray-900">{project.role}</span>
                        </div>
                      </div>
                  </div>
              </div>
            </Reveal>
          ))}
        </div>

        {/* Project Grid - Lightbox Enabled */}
        <div className="grid md:grid-cols-2 gap-8">
          {projects.map((project, index) => (
            <Reveal key={index} delay={index * 100}>
              <div 
                className={`group relative h-[420px] rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 cursor-zoom-in border border-gray-100`}
                onClick={() => (project.image || project.video) && setLightboxImage(project.image || project.video)}
              >
                
                {/* Immersive Background (Image, Video or Abstract UI) */}
                {project.video ? (
                  <video 
                    src={project.video} 
                    autoPlay 
                    loop 
                    muted 
                    playsInline
                    className="absolute inset-0 w-full h-full object-cover object-top transition-transform duration-700 group-hover:scale-105 z-0"
                  />
                ) : project.image ? (
                  <img 
                    src={project.image} 
                    alt={project.title} 
                    className="absolute inset-0 w-full h-full object-cover object-top transition-transform duration-700 group-hover:scale-105 z-0"
                  />
                ) : (
                  <div className={`absolute inset-0 w-full h-full ${project.color} z-0`}>
                    <div className="absolute inset-0 opacity-10 bg-[radial-gradient(#000_1px,transparent_1px)] [background-size:16px_16px]"></div>
                    {/* Abstract shapes centered */}
                    <div className="absolute inset-0 flex items-center justify-center transform group-hover:scale-105 transition-transform duration-700">
                      <div className="w-3/4 h-3/4 bg-white shadow-xl rounded-lg p-4 relative">
                          <div className="flex gap-2 mb-4">
                            <div className="w-2 h-2 rounded-full bg-gray-200"></div>
                            <div className="w-2 h-2 rounded-full bg-gray-200"></div>
                            <div className="w-2 h-2 rounded-full bg-gray-200"></div>
                          </div>
                          <div className="h-4 w-1/3 bg-gray-100 rounded mb-4"></div>
                          <div className="space-y-2">
                            <div className="h-2 w-full bg-gray-50 rounded"></div>
                            <div className="h-2 w-5/6 bg-gray-50 rounded"></div>
                            <div className="h-2 w-4/6 bg-gray-50 rounded"></div>
                          </div>
                          <div className="mt-6 flex gap-4">
                              <div className="h-16 w-1/2 bg-gray-50 rounded-lg border border-gray-100"></div>
                              <div className="h-16 w-1/2 bg-gray-50 rounded-lg border border-gray-100"></div>
                          </div>
                      </div>
                    </div>
                  </div>
                )}
                
                {/* Content Overlay - Glassmorphic Bottom Panel - Removed top border */}
                <div className="absolute bottom-0 left-0 right-0 p-8 bg-white/70 backdrop-blur-xl transition-all duration-300 z-10">
                  <div className="flex justify-between items-start mb-4">
                    <span className="text-xs font-bold tracking-wider uppercase text-gray-800 border border-gray-800/20 px-2 py-1 rounded">
                      {project.category}
                    </span>
                    <ArrowUpRight className="text-gray-800 group-hover:scale-110 transition-transform" />
                  </div>
                  <h3 className="text-2xl font-bold mb-2 group-hover:text-blue-700 transition-colors text-gray-900">
                    {project.title}
                  </h3>
                  
                  {/* Collapsible Content: Description & Role - Hidden by default, shown on hover */}
                  <div className="max-h-0 opacity-0 group-hover:max-h-40 group-hover:opacity-100 overflow-hidden transition-all duration-500 ease-in-out">
                    <p className="text-gray-800 mb-2 pt-2 line-clamp-2">
                      {project.desc}
                    </p>
                    <p className="text-xs font-medium text-gray-600 uppercase tracking-wide">
                      {project.role}
                    </p>
                  </div>
                </div>
              </div>
            </Reveal>
          ))}
        </div>
      </section>

      {/* Experience Section */}
      <section id="experience" className="relative z-10 py-32 bg-gray-900 text-white">
        <div className="max-w-4xl mx-auto px-6">
          <Reveal>
            <h2 className="text-4xl font-bold mb-16 flex items-center gap-4">
              <Briefcase className="text-gray-500" />
              工作经历
            </h2>
          </Reveal>

          <div className="space-y-12">
            {experiences.map((exp, index) => (
              <Reveal key={index} delay={index * 100}>
                <div className="relative pl-8 md:pl-0 group">
                  {/* Timeline line for mobile */}
                  <div className="absolute left-0 top-2 bottom-0 w-0.5 bg-gray-800 md:hidden"></div>
                  <div className="absolute left-[-5px] top-2.5 w-2.5 h-2.5 rounded-full bg-gray-600 border-2 border-gray-900 md:hidden"></div>

                  <div className="grid md:grid-cols-12 gap-6 hover:bg-white/5 p-6 rounded-xl transition-colors duration-300 -mx-6 border border-transparent hover:border-white/10">
                    <div className="md:col-span-3 text-gray-400 font-mono text-sm pt-1">
                      {exp.period}
                    </div>
                    <div className="md:col-span-9">
                      <div className="flex flex-col md:flex-row md:items-center justify-between mb-2">
                        <h3 className="text-xl font-bold text-white group-hover:text-blue-400 transition-colors">
                          {exp.company}
                        </h3>
                        <span className="text-sm text-gray-500 mt-1 md:mt-0">{exp.role}</span>
                      </div>
                      <p className="text-gray-400 mb-4 leading-relaxed">
                        {exp.desc}
                      </p>

                      {/* Challenge & Solution Block */}
                      {(exp.challenge || exp.solutions) && (
                        <div className="mb-6 bg-white/5 rounded-lg p-4 border border-white/5">
                          {exp.challenge && (
                            <div className="mb-4">
                              <h4 className="text-xs font-bold text-red-300 uppercase tracking-wider mb-2 flex items-center gap-2">
                                <Target size={14} /> 挑战
                              </h4>
                              <p className="text-sm text-gray-400 leading-relaxed">
                                {exp.challenge}
                              </p>
                            </div>
                          )}
                          {exp.solutions && (
                            <div>
                              <h4 className="text-xs font-bold text-green-300 uppercase tracking-wider mb-2 flex items-center gap-2">
                                <CheckCircle size={14} /> 解决
                              </h4>
                              <ul className="space-y-2">
                                {exp.solutions.map((sol, i) => (
                                  <li key={i} className="text-sm text-gray-400 leading-relaxed">
                                    <span className="text-white font-medium">{sol.title}：</span>
                                    {sol.desc}
                                  </li>
                                ))}
                              </ul>
                            </div>
                          )}
                        </div>
                      )}

                      <div className="flex flex-wrap gap-2">
                        {exp.highlights.map((tag, i) => (
                          <span key={i} className="px-2 py-1 bg-white/10 text-xs text-gray-300 rounded hover:bg-white/20 transition-colors">
                            {tag}
                          </span>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              </Reveal>
            ))}
          </div>

          <Reveal delay={200} className="mt-20 pt-12">
             <h2 className="text-2xl font-bold mb-8 flex items-center gap-3">
               <Award className="text-gray-500" />
               教育背景
             </h2>
             <div className="grid md:grid-cols-2 gap-8">
               <div>
                 <h3 className="text-lg font-bold text-white">上海交通大学继续教育学院</h3>
                 <p className="text-gray-400">视觉传达 / 本科</p>
                 <p className="text-gray-600 text-sm mt-1">2016.02 ~ 2018.09</p>
               </div>
               <div>
                 <h3 className="text-lg font-bold text-white">镇江高等专科学院</h3>
                 <p className="text-gray-400">平面设计 / 大专</p>
                 <p className="text-gray-600 text-sm mt-1">2012.09 ~ 2015.07</p>
               </div>
             </div>
          </Reveal>
        </div>
      </section>

      {/* Footer / Contact */}
      <footer id="contact" className="relative z-10 bg-white pt-32 pb-12 px-6">
        <div className="max-w-6xl mx-auto">
          <Reveal>
            <div className="bg-gray-50 rounded-3xl p-12 md:p-24 text-center border border-gray-100">
              <h2 className="text-4xl md:text-6xl font-bold mb-8">
                Let's work together.
              </h2>
              <p className="text-xl text-gray-500 mb-12 max-w-2xl mx-auto">
                如果您正在寻找一位经验丰富、能够解决复杂业务逻辑的设计师，欢迎与我联系。
              </p>
              
              <div className="flex flex-col md:flex-row justify-center gap-6">
                <a 
                  href={`tel:${personalInfo.phone}`}
                  className="flex items-center justify-center gap-3 px-8 py-4 bg-black text-white rounded-full font-bold hover:bg-blue-600 transition-all hover:scale-105"
                >
                  <Phone size={20} />
                  {personalInfo.phone}
                </a>
                <a 
                  href={`mailto:${personalInfo.email}`}
                  className="flex items-center justify-center gap-3 px-8 py-4 bg-white text-black border-2 border-gray-200 rounded-full font-bold hover:border-black transition-all hover:scale-105"
                >
                  <Mail size={20} />
                  {personalInfo.email}
                </a>
              </div>
            </div>
          </Reveal>

          <div className="mt-16 flex flex-col md:flex-row justify-between items-center text-sm text-gray-400 pt-8">
            <p>© 2025 Wang Qixun. All Rights Reserved.</p>
            <div className="flex gap-6 mt-4 md:mt-0">
               <span className="hover:text-black cursor-pointer transition-colors">WeChat</span>
               <span className="hover:text-black cursor-pointer transition-colors">LinkedIn</span>
               <span className="hover:text-black cursor-pointer transition-colors">Behance</span>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
}